<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>World TB-Day</title>
</head>

<body>
    <div class="row">
        <div class="col-12">
            <div class="contact-form-area">
                <h3 class="text-center">GENERATE PERSONALIZED FLYER</h3>

                <div class="row">
                    <div style="
                position: relative;
                width: 300px;
                height: 500px;
                margin: auto;
              " id="target">
                        <span>
                <img
                  src="img/IMG-20240324-WA0005.jpg"
                  width="300px"
                  height="300px"
                />

                <img
                  src
                  class="avatar"
                  style="
                    position: absolute;
                    left: 10px;
                    top: 50px;
                    border: 5px solid white;
                    border-radius: 50%;
                    width: 120px;
                    height: 120px;
                  "
                />
              </span>

                        <input type="file" name="userImage" class="form-control mt-3 userImage" id="userImage" onchange="if (!window.__cfRLUnblockHandlers) return false; readURL(this)" accept="image/*" data-cf-modified-3f8e212ece7a758e37c5167c- />
                        <span class="display"></span>
                        <button class="btn btn-success col-12" name="submit" onclick="if (!window.__cfRLUnblockHandlers) return false; snapshot(this)" style="display: none" data-cf-modified-3f8e212ece7a758e37c5167c->
                Download Flyer
              </button>
                    </div>
                </div>

                <div class="row"></div>
                <p class="view"></p>
                <canvas class="imageCanvas myCanvas" id="myCanvas" style="display: none"></canvas>
            </div>
        </div>
    </div>

    <script type="3f8e212ece7a758e37c5167c-text/javascript">
        function loadImage() {
            $(".fileinput").click();
        }
        //
        /*Image upload function*/

        function readURL(input) {
            //$(".avatar").show();
            var image = $(".userImage")[0].files[0];
            //var image = "";

            //if (input.files && input.files[0]){
            //var reader = new FileReader();
            //reader.onload = function (e) {
            //$(".avatar").attr('src', e.target.result);
            //$(".avatar").attr('data', e.target.result);
            //};
            //reader.readAsDataURL(input.files[0]);
            //}

            // $.ajax({
            //     type: "POST",
            //     url: 'anniversary_upload.php',
            //     data: {
            //         image: image,
            //     },
            //     success: function(data){
            //         //$(".avatar").attr('src', data);
            //     },
            //     error: function(xhr, status, error){
            //       //var errorMessage = xhr.status + ' : ' + xhr.statusText;
            //     }
            // });
            // }


            var xhttp;

            var formData = new FormData;
            formData.append('image', image);

            xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                $(".display").html("<i class='fa fa-spinner fa-spin'></i> Uploading...");
                var resultVar = $('.searchResultDiv').parent();
                if (this.readyState == 4 && this.status == 200) {
                    //alert(this.responseText);
                    $(".avatar").attr('src', this.responseText);
                    $(".display").html("");
                    $(".btn").show();
                }
            };
            xhttp.open("POST.html", "anniversary_upload.html", true);
            xhttp.send(formData);
        }
    </script>
</body>

</html>